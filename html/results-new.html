<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>uncrowd.me</title>
        <meta name="description" content="">
        <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
        <link rel="stylesheet" href="result-style.css">
        <link rel="stylesheet" href="navigation.css">
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
        <script data-ad-client="ca-pub-3764479507130379" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-165558952-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-165558952-1');
        </script>

    </head>
    <style>
      #btn-box {
        display: grid;
        grid-template-columns: auto;
      }
      .btn-deco {
        border-radius: 2em;
        text-align: center;
        max-width: 100px;
        font-size: 14px;
        padding-top: 5px;
        padding-bottom: 5px;
      }

      #dataGraph {
        grid-column: 1/-1;
      }

      #disclaimer {
        display: block;
        font-size: 12px;
        font-weight: 400;
        color: #868e96;
        padding-top: 10px;
      }
    </style>
    <ul class="navBar">
        <li class="navElem" style="float: left;"><a href="index.html" style="padding: 10px 100px"><img id="logo" alt="Logo" src="images/logo.png"/>uncrowd.me</a></li>
        <li class="navElem"><a href="about-us.html">About Us</a></li>
        <li class="navElem"><a href="more-tools.html">More Tools</a></li>
    </ul>
    <body>
        <div class="header">
            <h2>Results:</h2>
        </div>
        <div class="timeBox">
            <div class="dataBox">
              <div class="metaInfo">
                  <h2 id="name"></h2>
                  <div id="btn-box">
                    <div class="btn-deco" id="open-btn">
                    </div>
                  </div>
                  <span id="disclaimer">Actual hours and data may vary. <a href="" style="text-decoration: none; outline: none;">Disclaimer</a></span>
                  <h4 id="address"></h4>
                  <span id="description"></span>
              </div>
                <div class="dataInfo">
                    <!-- <h2>Free for the next 20 mins</h2> -->
                </div>
                <canvas id="dataGraph" width="" height=""></canvas>
            </div>
            <div class="mapBox" id="map-prev">

            </div>
            <a class="linkButt" href="index.html">Search Again</a>
        </div>
        <br>
    <script>
      $(document).ready(() => {

        var data = {
      "analysis": [
        {
            "busy_hours": [],
            "day_info": {
                "day_int": 0,
                "day_max": 32,
                "day_mean": 19,
                "day_rank_max": 7,
                "day_rank_mean": 7,
                "day_text": "Monday",
                "venue_closed": 0,
                "venue_open": 0
            },
            "hour_analysis": [
                {
                    "hour": 6,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 7,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 8,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 9,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 10,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 11,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 12,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 13,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 14,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 15,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 16,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 17,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 18,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 19,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 20,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 21,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 22,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 23,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 0,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 1,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 2,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 3,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 4,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 5,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                }
            ],
            "peak_hours": [],
            "quiet_hours": [
                6,
                7,
                8,
                15,
                16,
                3,
                4,
                5
            ],
            "surge_hours": {
                "most_people_come": 9,
                "most_people_leave": 13
            }
        },
        {
            "busy_hours": [
                19,
                20,
                21
            ],
            "day_info": {
                "day_int": 1,
                "day_max": 53,
                "day_mean": 26,
                "day_rank_max": 4,
                "day_rank_mean": 4,
                "day_text": "Tuesday",
                "venue_closed": 0,
                "venue_open": 0
            },
            "hour_analysis": [
                {
                    "hour": 6,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 7,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 8,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 9,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 10,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 11,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 12,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 13,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 14,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 15,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 16,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 17,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 18,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 19,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 20,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 21,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 22,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 23,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 0,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 1,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 2,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 3,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 4,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 5,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                }
            ],
            "peak_hours": [
                {
                    "peak_delta_mean_week": 25,
                    "peak_end": 1,
                    "peak_intensity": 3,
                    "peak_max": 19,
                    "peak_start": 18
                }
            ],
            "quiet_hours": [
                6,
                15,
                16,
                3,
                4,
                5
            ],
            "surge_hours": {
                "most_people_come": 18,
                "most_people_leave": 1
            }
        },
        {
            "busy_hours": [],
            "day_info": {
                "day_int": 2,
                "day_max": 35,
                "day_mean": 22,
                "day_rank_max": 6,
                "day_rank_mean": 6,
                "day_text": "Wednesday",
                "venue_closed": 0,
                "venue_open": 0
            },
            "hour_analysis": [
                {
                    "hour": 6,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 7,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 8,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 9,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 10,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 11,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 12,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 13,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 14,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 15,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 16,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 17,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 18,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 19,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 20,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 21,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 22,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 23,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 0,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 1,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 2,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 3,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 4,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 5,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                }
            ],
            "peak_hours": [],
            "quiet_hours": [
                6,
                7,
                3,
                4,
                5
            ],
            "surge_hours": {
                "most_people_come": 17,
                "most_people_leave": 3
            }
        },
        {
            "busy_hours": [
                22,
                23,
                0
            ],
            "day_info": {
                "day_int": 3,
                "day_max": 50,
                "day_mean": 24,
                "day_rank_max": 5,
                "day_rank_mean": 5,
                "day_text": "Thursday",
                "venue_closed": 0,
                "venue_open": 0
            },
            "hour_analysis": [
                {
                    "hour": 6,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 7,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 8,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 9,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 10,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 11,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 12,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 13,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 14,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 15,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 16,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 17,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 18,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 19,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 20,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 21,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 22,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 23,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 0,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 1,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 2,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 3,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 4,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 5,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                }
            ],
            "peak_hours": [
                {
                    "peak_delta_mean_week": 22,
                    "peak_end": 1,
                    "peak_intensity": 2,
                    "peak_max": 23,
                    "peak_start": 20
                }
            ],
            "quiet_hours": [
                6,
                7,
                3
            ],
            "surge_hours": {
                "most_people_come": 21,
                "most_people_leave": 1
            }
        },
        {
            "busy_hours": [
                18,
                19,
                22,
                23,
                0,
                1
            ],
            "day_info": {
                "day_int": 4,
                "day_max": 85,
                "day_mean": 37,
                "day_rank_max": 3,
                "day_rank_mean": 2,
                "day_text": "Friday",
                "venue_closed": 0,
                "venue_open": 0
            },
            "hour_analysis": [
                {
                    "hour": 6,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 7,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 8,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 9,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 10,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 11,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 12,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 13,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 14,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 15,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 16,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 17,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 18,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 19,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 20,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 21,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 22,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 23,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 0,
                    "intensity_nr": 2,
                    "intensity_txt": "High"
                },
                {
                    "hour": 1,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 2,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 3,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 4,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 5,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                }
            ],
            "peak_hours": [
                {
                    "peak_delta_mean_week": 22,
                    "peak_end": 3,
                    "peak_intensity": 2,
                    "peak_max": 18,
                    "peak_start": 16
                },
                {
                    "peak_delta_mean_week": 57,
                    "peak_end": 3,
                    "peak_intensity": 4,
                    "peak_max": 0,
                    "peak_start": 16
                }
            ],
            "quiet_hours": [
                5
            ],
            "surge_hours": {
                "most_people_come": 22,
                "most_people_leave": 2
            }
        },
        {
            "busy_hours": [
                9,
                10,
                11,
                12,
                13,
                18,
                19,
                0,
                1
            ],
            "day_info": {
                "day_int": 5,
                "day_max": 85,
                "day_mean": 39,
                "day_rank_max": 3,
                "day_rank_mean": 1,
                "day_text": "Saturday",
                "venue_closed": 0,
                "venue_open": 0
            },
            "hour_analysis": [
                {
                    "hour": 6,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 7,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 8,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 9,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 10,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 11,
                    "intensity_nr": 2,
                    "intensity_txt": "High"
                },
                {
                    "hour": 12,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 13,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 14,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 15,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 16,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 17,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 18,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 19,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 20,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 21,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 22,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 23,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 0,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 1,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 2,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 3,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 4,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 5,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                }
            ],
            "peak_hours": [
                {
                    "peak_delta_mean_week": 57,
                    "peak_end": 15,
                    "peak_intensity": 4,
                    "peak_max": 11,
                    "peak_start": 8
                },
                {
                    "peak_delta_mean_week": 18,
                    "peak_end": 3,
                    "peak_intensity": 2,
                    "peak_max": 18,
                    "peak_start": 15
                },
                {
                    "peak_delta_mean_week": 19,
                    "peak_end": 3,
                    "peak_intensity": 2,
                    "peak_max": 0,
                    "peak_start": 15
                }
            ],
            "quiet_hours": [
                6,
                4,
                5
            ],
            "surge_hours": {
                "most_people_come": 9,
                "most_people_leave": 13
            }
        },
        {
            "busy_hours": [
                10,
                11,
                12,
                13,
                14
            ],
            "day_info": {
                "day_int": 6,
                "day_max": 100,
                "day_mean": 32,
                "day_rank_max": 1,
                "day_rank_mean": 3,
                "day_text": "Sunday",
                "venue_closed": 0,
                "venue_open": 0
            },
            "hour_analysis": [
                {
                    "hour": 6,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 7,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 8,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 9,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 10,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 11,
                    "intensity_nr": 2,
                    "intensity_txt": "High"
                },
                {
                    "hour": 12,
                    "intensity_nr": 2,
                    "intensity_txt": "High"
                },
                {
                    "hour": 13,
                    "intensity_nr": 2,
                    "intensity_txt": "High"
                },
                {
                    "hour": 14,
                    "intensity_nr": 1,
                    "intensity_txt": "Above average"
                },
                {
                    "hour": 15,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 16,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 17,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 18,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 19,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 20,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 21,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 22,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 23,
                    "intensity_nr": 0,
                    "intensity_txt": "Average"
                },
                {
                    "hour": 0,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 1,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 2,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 3,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 4,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                },
                {
                    "hour": 5,
                    "intensity_nr": -2,
                    "intensity_txt": "Low"
                }
            ],
            "peak_hours": [
                {
                    "peak_delta_mean_week": 72,
                    "peak_end": 20,
                    "peak_intensity": 5,
                    "peak_max": 12,
                    "peak_start": 8
                }
            ],
            "quiet_hours": [
                6,
                7,
                1,
                2,
                3,
                4,
                5
            ],
            "surge_hours": {
                "most_people_come": 10,
                "most_people_leave": 14
            }
        }
    ],
    "api_key_private": "pri_728529873f624118be44a8750daf22d6",
    "epoch_analysis": "1589768606",
    "status": "OK",
    "venue_info": {
        "venue_address": "2940 Rochester Rd Troy, MI 48083 United States",
        "venue_id": "ven_776e57427164334c2d4f325267494a45663246504b2d634a496843",
        "venue_name": "The Hills City Grille",
        "venue_timezone": "America/Detroit"
    }
}

        const pub_key = "pub_498c2fd40727467a89e1bcd00a5290de";
        var d = new Date();
        console.log(d.getDay());
        var today_bt = d.getDay() - 1 == -1 ? 7 : d.getDay() - 1;
        console.log(today_bt);

        function getWeekRaw() {
          var settings = {
              "url": "https://besttime.app/api/v1/forecasts/weekoverview",
              "data": {
                  'api_key_public': pub_key,
                  'venue_id': id
              },
              "method": "GET"
          };

          $.ajax(settings).done(function (response) {
              console.log(response);
              overview = response.analysis.week_overview;
          });
        }

        function getDayRaw(id) {
          var settings = {
              "url": "https://besttime.app/api/v1/forecasts/day/raw",
              "data": {
                  'api_key_public': pub_key,
                  'venue_id': id,
                  'day_int': today_bt
              },
              "method": "GET"
          };

          $.ajax(settings).done(function (response) {
              console.log(response);
              var data = {}
              for(var i = 0; i < response.analysis.daw_raw.length; i++){
                data[String(i)] = response.analysis.daw_raw[i];
              }
              loadChart(data, {});
          });
        }

        function getNowRaw(id) {
            var settings = {
                "url": "https://besttime.app/api/v1/forecasts/now/raw",
                "data": {
                    'api_key_public': pub_key,
                    'venue_id': id,
                    // 'day_int': 3,
                    // 'hour': 16
                },
                "method": "GET"
            };

            $.ajax(settings).done(function (response) {
                console.log(response);
                var hour = response.analysis.hour_analysis.hour;
                var intensity_nr = response.analysis.hour_analysis.intensity_nr;
                var intensity_txt = response.analysis.hour_analysis.intensity_txt;
                var hour_raw = response.analysis.hour_raw;
            });
        }

        function getPeakHours(id) {
          var settings = {
              "url": "https://besttime.app/api/v1/forecasts/peaks",
              "data": {
                  'api_key_public': pub_key,
                  'venue_id': id,
                  'day_step': 0,
                  'hour_step': 0
              },
              "method": "GET"
          };

          $.ajax(settings).done(function (response) {
              console.log(response);
              var analysis = response.analysis;
              var day_info = analysis.day_info;
              var day_rank_max = day_info.day_rank_max;
              var day_rank_mean = day_info.day_rank_mean;
              var peak_hours = analysis.peak_hours;
              peak_hours.forEach(peak => {
                console.log(peak);
              })

          });
        }

        function getBusyHours(id) {
          var settings = {
              "url": "https://besttime.app/api/v1/forecasts/busy",
              "data": {
                  'api_key_public': pub_key,
                  'venue_id': id,
                  'day_step': 0
              },
              "method": "GET"
          };

          $.ajax(settings).done(function (response) {
              console.log(response);
              var analysis = response.analysis;
              var busy_hours = analysis.busy_hours;
              var busy_hours_raw = analysis.busy_hours_list;
              var busy_hours_12h = analysis.busy_hours_list_12h;
              var busy_hours_coming_raw = analysis.busy_hours_list_coming;
              var busy_hours_coming_12h = analysis.busy_hours_list_coming_12h;
          });
        }

        function getQuietHours(id) {
          var settings = {
              "url": "https://besttime.app/api/v1/forecasts/quiet",
              "data": {
                  'api_key_public': pub_key,
                  'venue_id': id,
                  'day_step': 0,
                  'hour_step':0
              },
              "method": "GET"
          };

          $.ajax(settings).done(function (response) {
              console.log(response);
              var analysis = response.analysis;
              var quiet_hours = analysis.quiet_hours;
              var quiet_hours_raw = analysis.quiet_hours_list;
              var quiet_hours_12h = analysis.quiet_hours_list_12h;
              var quiet_hours_coming_raw = analysis.quiet_hours_list_coming;
              var quiet_hours_coming_12h = analysis.quiet_hours_list_coming_12h;
          });
        }

        function getSurgeHours(id) {
          var settings = {
              "url": "https://besttime.app/api/v1/forecasts/surge",
              "data": {
                  'api_key_public': pub_key,
                  'venue_id': id,
                  'day_step': 0,
                  'hour_step':0
              },
              "method": "GET"
          };

          $.ajax(settings).done(function (response) {
              console.log(response);
              var surge_hours = response.analysis.surge_hours;
          });
        }

        getVenueID().then(function(id) {
          Cookies.set('venue_id', id, { expires: 1 });
          // TODO: make this into an array, so we can cache client side
          localStorage.setItem('venue_id', id);
          getDayRaw(id);
          getNowRaw(id);
          getPeakHours(id);
          getBusyHours(id);
          getQuietHours(id);
          getSurgeHours(id);

        })


        getData().then(function(data) {
          // var data = parsed_data.data;
          breakdown = data.analysis;
          $('#name').html(data.venue_info.venue_name);
          $('#address').html(data.venue_info.venue_address);
          // $('#description').html(data.description);

          var d = new Date();
          var hour = d.getHours();
          var weekday = new Array(7);
          var open = true;
          weekday[0] = "Monday";
          weekday[1] = "Tuesday";
          weekday[2] = "Wednesday";
          weekday[3] = "Thursday";
          weekday[4] = "Friday";
          weekday[5] = "Saturday";
          weekday[6] = "Sunday";

          var today = {};
          var wk = weekday[d.getDay()];

          breakdown.forEach(day => {
            if(day.day_info.day_int == wk){
              today = day;
            }
          })

          busy_hours = today.busy_hours;
          day_info = day.day_info;
          hour_analysis = day.hour_analysis;
          peak_hours = day.peak_hours;
          quiet_hours = day.quiet_hours;
          surge_hours = day.surge_hours;

          if(day_info){
            if(day_info.venue_open == 0 && day_info.venue_closed == 0){
              // 24 hours
            }
            else if(hour >= day_info.venue_open && hour <= day_info.venue_closed){
              $('#open-btn').css("background-color","#51cf66")
              $('#open-btn').html("Open Now")
            }
            else {
              $('#open-btn').css('background-color',"#fa5252")
              $('#open-btn').html("Closed Now")
              open = false;
            }
          }

          // Popular times processing
          // 0 is sunday for d.getDay, we have 7 as sunday
          d.getDay() == 0 ? pt = data.popular_times[7] : pt = data.popular_times[String(d.getDay())];
          if(open){
            pt_data = pt[String(hour)]
            console.log(pt_data[0])
            console.log(pt_data[1])
          }
          else {
            pt_data = [
              "0","Closed"
            ]
          }

          // var today_pt = pt;
          var filtered_pt = {}

          var live_offset, ctr = 0;

          Object.keys(pt).filter(function(key) {
              if(pt[key][0] != 0){
                if(key == hour){
                  live_offset = ctr;
                }
                filtered_pt[key] = pt[key][0];
                ctr++;
              }
          });
          var live_dataset = Array.from(Array(Object.keys(filtered_pt)), () => 0)
          live_dataset[live_offset] = pt_data[0];

          loadChart(filtered_pt, live_dataset)

          var src = `https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2853.6175193400404!2d${data.geometry.lat}!3d${data.geometry.lng}!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s${data.tfid}!2sKroger!5e0!3m2!1sen!2sus!4v${Date.now()}!5m2!1sen!2sus`;
          var embed = `
          <iframe id="map-preview" src="${src}" width="100%" height="400" frameborder="0" style="border:0;" allowfullscreen="" aria-hidden="false" tabindex="0"></iframe>
          `
          $('#map-prev').html(embed);
        });

      });

      function loadChart(data, live_dataset) {
        var ctx = document.getElementById('dataGraph').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: Object.keys(data),
                datasets: [{
                    label: 'Crowd Index',
                    data: Object.values(data),
                    backgroundColor: [
                        // 'rgba(54, 162, 235, 0.2)',
                    ],
                    borderColor: [
                        // 'rgba(54, 162, 235, 1)',
                    ],
                    borderWidth: 1
                },  {
                  type: 'bar',
                  label: 'Live',
                  backgroundColor: "red",
                  data: live_dataset
                }]
            },
            options: {
                scales: {
                    xAxes: [{
                        stacked: true,
                        // type: 'time',
                        // time: {
                        //     unit: 'hour'
                        // }
                    }],
                    yAxes: [{
                        ticks: {
                            stacked: true,
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
      }

      function getVenueID() {
        return new Promise((resolve, reject) => {
          var status_id = localStorage.getItem('status_id');
          let url = `https://app.uncrowd.me/api/status?id=${status_id}`
          let max_retries = 5;
          var retries = 0;
          var git = setInterval(function () {
            $.get(url, function (data) {
                console.log(data);
                if(data.status == "done"){
                  Cookies.set('data', JSON.stringify(data), { expires: 1 });
                  localStorage.setItem('data', JSON.stringify(data));
                  clearInterval(git);
                  resolve(data.result.venue_info);
                }
                else if(data.status == "waiting") {
                  // splash waiting
                }
                else if(data.status == "queued") {
                  // splash waiting
                }
                else if(data.status == "failed") {
                  // error page
                }
              }).fail(function(data, ts, xhr) {
                console.log(data.status);
                if(data.status == 429){
                  // rate limited
                }
                retries++;
                if(retries > max_retries){
                  clearInterval(git);
                  // do error handling here (timeout)
                }
              })
          }, 500);
        })

      }

      loadChart();
    </script>
    </body>
</html>
